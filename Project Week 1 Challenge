#include <LiquidCrystal.h>

// LCD pins: RS, E, D4, D5, D6, D7
LiquidCrystal lcd(8,9,4,5,6,7);

// L298N motor driver pins
const int ENA = 3;  // Enable pin for left motor (PWM)
const int IN1 = 1;  // Left motor direction 1
const int IN2 = 2;  // Left motor direction 2
const int ENB = 11; // Enable pin for right motor (PWM)
const int IN3 = 12; // Right motor direction 1
const int IN4 = 13; // Right motor direction 2

unsigned long currentTime = 0;
unsigned long previousTime = 0;
int interval = 10000;

void setup() {
  lcd.begin(16, 2);
  lcd.print("Robot Car Ready");
  delay(2000);
  pinMode(ENA, OUTPUT);
  pinMode(ENB, OUTPUT);
  pinMode(IN1, OUTPUT);
  pinMode(IN2, OUTPUT);
  pinMode(IN3, OUTPUT);
  pinMode(IN4, OUTPUT);
  previousTime = millis(); 
  // record start time
}

void loop() {
  currentTime = millis()-previousTime;  // get the current time since Arduino started
  lcd.setCursor(0, 0);
  lcd.print("Moving forward  ");
  lcd.setCursor(0, 1);
  lcd.print("Time: ");
  lcd.print(currentTime / 1000);  // display in seconds
  lcd.print(" sec ");
  
  if (currentTime  < interval) {
    moveForward();
  } else {
    stop();
  }
}

// Move forward
void moveForward() {
  digitalWrite(IN1, HIGH);
  digitalWrite(IN2, LOW);
  digitalWrite(IN3, HIGH);
  digitalWrite(IN4, LOW);
  analogWrite(ENA, 200);
  analogWrite(ENB, 120);
}

// Stop motors
void stop() {
  digitalWrite(IN1, LOW);
  digitalWrite(IN2, LOW);
  digitalWrite(IN3, LOW);
  digitalWrite(IN4, LOW);
}
